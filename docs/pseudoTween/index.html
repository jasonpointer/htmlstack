<!DOCTYPE html>
<html>
<head>
<title>Overly verbose HTML5 Canvas tweening</title>
<link  rel="stylesheet" type="text/css" href="../css/site.css" />
<!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <style>
    canvas {border:1px solid #666}
    </style>
  </head>
  <body>
<header>HTML5 Canvas tweening (pseudo)</header>
<section id="content">
	<article>
		<canvas height='500' id='canvas' width='500'></canvas><br clear="all" />
		<button onClick="new_boxW=300;new_boxH=100">300x100</button>
		<button onClick="new_boxW=100;new_boxH=300">100x300</button>
		<button onClick="new_boxW=250;new_boxH=50">250x50</button>
		<button onClick="new_boxW=350;new_boxH=100">350x100</button>
		<button onClick="new_boxW=400;new_boxH=400">400x400</button>
	</article>
	
	<article class="description" style="clear:both">
		<p>While the code is overly verbose and not closed properly, I think it ends up being easier to read and understand for my wonderful "view source" folks.</p>
		<p><a href="index2.html">Here's one that automatically resizes without the buttons</a></p>
	</article>
</section>

<footer>back to <a href="/">htmlstack</a></footer>

<script type='text/javascript'>
/* Welcome to the source!
 * HTML5 Really verbose pesuedo-tweening
 * http://htmlstack.com/
 *
 * Author, Joe Maddalone
*/

var _  = function(selector){ return document.getElementById(selector)}

/* uck, here come a bunch of global vars*/
var movieH = 500;
var movieW = 500;
var movieXC = movieW/2;
var movieYC = movieH/2;
var boxH = 100;
var boxW = 300;
var new_boxH = 100;
var new_boxW = 300;	
var boxX = movieXC-(boxW/2);
var boxY = movieYC-(boxH/2);
var me = _('canvas').getContext("2d");
var steps = 10

function animate(){
	/* my steps var should really be a FPS value */
	if (boxH < new_boxH){boxH+=(new_boxH/steps);}
	if (boxH > new_boxH){boxH-=(new_boxH/steps);}		
	if (boxW < new_boxW){boxW+=(new_boxW/steps);}
	if (boxW > new_boxW){boxW-=(new_boxW/steps);}		
	/* 
	the structure above works, but will always do height before width.
	true tweening would require pushing everything into an 
	array and then executing those adjustments
	*/
    var boxX = movieXC-(boxW/2);
    var boxY = movieYC-(boxH/2);
	me.clearRect(0,0,500,500)
	DrawBox(me,0,0,500,500,"#fff","#fff")
	DrawBox(me,boxX,boxY,boxW,boxH,"rgba(0,0,0,0.5)","rgba(0,0,0,0.5)")
	DrawBox(me,boxX+1,boxY+1,boxW-2,boxH-2,"#fff","#000")
	DrawBox(me,boxX+4,boxY+4,boxW-8,boxH-8,"#A24B30","#000")	
}

function DrawBox(ctx,sx,sy,dx,dy,fc,sc){
	ctx.fillStyle =fc;
	ctx.fillRect(sx,sy , dx, dy);
}

setInterval(function(){animate(me,boxX,boxY,boxW,boxH)},30)

</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-91014-16");
pageTracker._trackPageview();
} catch(err) {}</script>


</body>
</html>